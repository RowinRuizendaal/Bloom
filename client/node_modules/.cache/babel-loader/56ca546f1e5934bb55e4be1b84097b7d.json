{"remainingRequest":"/usr/local/lib/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!/usr/local/lib/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!/usr/local/lib/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ralfzonneveld/Documents/Repositories/20:21/webdevüßë‚Äçüíª-20:21/Bloom/client/src/views/chat/chatDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ralfzonneveld/Documents/Repositories/20:21/webdevüßë‚Äçüíª-20:21/Bloom/client/src/views/chat/chatDetail.vue","mtime":1623684370517},{"path":"/usr/local/lib/node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/local/lib/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/usr/local/lib/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/local/lib/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9yYWxmem9ubmV2ZWxkL0RvY3VtZW50cy9SZXBvc2l0b3JpZXMvMjA6MjEvd2ViZGV2XHVEODNFXHVEREQxXHUyMDBEXHVEODNEXHVEQ0JCLTIwOjIxL0Jsb29tL2NsaWVudC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiL1VzZXJzL3JhbGZ6b25uZXZlbGQvRG9jdW1lbnRzL1JlcG9zaXRvcmllcy8yMDoyMS93ZWJkZXZcdUQ4M0VcdURERDFcdTIwMERcdUQ4M0RcdURDQkItMjA6MjEvQmxvb20vY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLWFsbC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBpbyBmcm9tICJzb2NrZXQuaW8tY2xpZW50IjsKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkNoYXREZXRhaWwiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByZXF1ZXN0QWNjZXB0ZWQ6IGZhbHNlLAogICAgICB2aWV3Q3JlYXRlcjogZmFsc2UsCiAgICAgIHNvY2tldDogbnVsbCwKICAgICAgbWVzc2FnZXNIaXN0b3J5OiBbXSwKICAgICAgcGFydGljaXBhbnQ6IFtdLAogICAgICBuZXdNZXNzYWdlOiBudWxsLAogICAgICBtZXNzYWdlczogW10KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5zb2NrZXQgPSBpbygiaHR0cDovL2xvY2FsaG9zdDo1MDAwIik7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLnNvY2tldC5lbWl0KCJqb2luUm9vbSIsIHsKICAgICAgdXNlcklEOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLl9pZCwKICAgICAgcm9vbUlEOiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQKICAgIH0pOwogICAgdGhpcy5zb2NrZXQub24oInJvb21EYXRhIiwgZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgdmFyIHJvb20gPSBfcmVmLnJvb20sCiAgICAgICAgICBwYXJ0aWNpcGFudCA9IF9yZWYucGFydGljaXBhbnQ7CiAgICAgIC8vIFN0b3JlIHBhcnRpY2lwYW50CiAgICAgIHZhciBwYXJ0aWNpcGFudERhdGEgPSBwYXJ0aWNpcGFudDsKCiAgICAgIF90aGlzLnBhcnRpY2lwYW50LnB1c2gocGFydGljaXBhbnREYXRhKTsKCiAgICAgIHZhciB1c2VySUQgPSBfdGhpcy4kc3RvcmUuc3RhdGUudXNlci5faWQ7IC8vIENoZWNrIGlmIHRoaXMgaXMgYSBjaGF0UmVxdWVzdCwgdGhlbiBwdXQgcmVxdWVzdCB0byB0cnVlCgogICAgICB2YXIgcmVxdWVzdFN0YXRlID0gcm9vbS5yZXF1ZXN0LmFjY2VwdGVkOwogICAgICB2YXIgcmVxdWVzdENyZWF0ZXIgPSByb29tLnJlcXVlc3QuY3JlYXRlcjsgLy8gY2hlY2sgaWYgY2hhdENyZWF0b3JJRCBpcyB0aGUgc2FtZSBhcyB0aGlzIHVzZXIgLS0+IHJlbmRlciBjaGF0CgogICAgICBpZiAocmVxdWVzdENyZWF0ZXIgPT0gdXNlcklEKSB7CiAgICAgICAgLy8gc2V0IHZpZXcgdG8gdmlld0NyZWF0ZXI6IGZhbHNlCiAgICAgICAgX3RoaXMudmlld0NyZWF0ZXIgPSB0cnVlOwogICAgICB9CgogICAgICBpZiAocmVxdWVzdFN0YXRlID09IHRydWUpIHsKICAgICAgICBfdGhpcy5yZXF1ZXN0QWNjZXB0ZWQgPSB0cnVlOwogICAgICB9IC8vIFN0b3JlIG1lc3NhZ2VzIGhpc3RvcnkKCgogICAgICB2YXIgbWVzc2FnZXMgPSByb29tLm1lc3NhZ2VzOwoKICAgICAgX3RoaXMubWVzc2FnZXNIaXN0b3J5LnB1c2gobWVzc2FnZXMpOwogICAgfSk7CiAgICB0aGlzLnNvY2tldC5vbigibmV3TWVzc2FnZSIsIGZ1bmN0aW9uIChtZXNzYWdlT2JqZWN0KSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCJOZXcgTWVzc2FnZTogIiwgbWVzc2FnZU9iamVjdCk7CiAgICAgIF90aGlzLm1lc3NhZ2VzLnB1c2gobWVzc2FnZU9iamVjdCk7CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIEdldCB0aGUgaW5pdGlhbHMgb2YgdGhlIG5hbWUKICAgIGNyZWF0ZUluaXRpYWxzOiBmdW5jdGlvbiBjcmVhdGVJbml0aWFscyhmaXJzdE5hbWUsIHN1ck5hbWUpIHsKICAgICAgdmFyIF9pbml0aWFscyRzaGlmdCwgX2luaXRpYWxzJHBvcDsKCiAgICAgIHZhciBmdWxsTmFtZSA9ICIiLmNvbmNhdChmaXJzdE5hbWUsICIgIikuY29uY2F0KHN1ck5hbWUpOyAvLyBMb2dpYyBmb3IgZ2V0dGluZyB0aGUgbmFtZSBpbml0aWFscwoKICAgICAgdmFyIHJneCA9IG5ldyBSZWdFeHAoLyhccHtMfXsxfSlccHtMfSsvLCAiZ3UiKTsKICAgICAgdmFyIGluaXRpYWxzID0gX3RvQ29uc3VtYWJsZUFycmF5KGZ1bGxOYW1lLm1hdGNoQWxsKHJneCkpIHx8IFtdOwogICAgICBpbml0aWFscyA9ICgoKChfaW5pdGlhbHMkc2hpZnQgPSBpbml0aWFscy5zaGlmdCgpKSA9PT0gbnVsbCB8fCBfaW5pdGlhbHMkc2hpZnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pbml0aWFscyRzaGlmdFsxXSkgfHwgIiIpICsgKCgoX2luaXRpYWxzJHBvcCA9IGluaXRpYWxzLnBvcCgpKSA9PT0gbnVsbCB8fCBfaW5pdGlhbHMkcG9wID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaW5pdGlhbHMkcG9wWzFdKSB8fCAiIikpLnRvVXBwZXJDYXNlKCk7CiAgICAgIHJldHVybiBpbml0aWFsczsKICAgIH0sCiAgICAvLyBDaGF0IHJlcXVlc3QgaGFuZGxlcgogICAgbWFrZVJlcXVlc3RDaG9pY2U6IGZ1bmN0aW9uIG1ha2VSZXF1ZXN0Q2hvaWNlKGNob2ljZSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGNoYXRJRCwgdXJsLCBjcmVhdGVySUQsIF9jaGF0SUQsIF91cmw7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmIChjaG9pY2UgPT09ICJyZWplY3QiKSB7CiAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGNob2ljZSk7CiAgICAgICAgICAgICAgICAgIGNoYXRJRCA9IF90aGlzMi4kcm91dGUucGFyYW1zLmlkOwogICAgICAgICAgICAgICAgICB1cmwgPSAiIi5jb25jYXQod2luZG93LmxvY2F0aW9uLm9yaWdpbiwgIi9hcGkvZGVsZXRlQ2hhdC8iKS5jb25jYXQoY2hhdElEKTsKICAgICAgICAgICAgICAgICAgYXhpb3MuZ2V0KHVybCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3JNc2cgPSByZXNwb25zZS5kYXRhOyAvLyBjb25zb2xlLmxvZygicmVzcG9uc2U6ICIsIGVycm9yTXNnKTsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXMyLiRyb3V0ZXIucHVzaCgiL2NoYXRzIik7IC8vIHN1Y2Nlc2Z1bGwgYWZ3aWp6aW5nIGZlZWRiYWNrIG1zZwoKICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICAgICAgICAgIH0pOyAvLyBkZWxldGUgY2hhdCBhbmQgZ28gYmFjayB0byAvY2hhdHMKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMi5yZXF1ZXN0QWNjZXB0ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICBjcmVhdGVySUQgPSBfdGhpczIucGFydGljaXBhbnRbMF0uaWQ7CiAgICAgICAgICAgICAgICAgIF9jaGF0SUQgPSBfdGhpczIuJHJvdXRlLnBhcmFtcy5pZDsKICAgICAgICAgICAgICAgICAgX3VybCA9ICIiLmNvbmNhdCh3aW5kb3cubG9jYXRpb24ub3JpZ2luLCAiL2FwaS9hY2NlcHRDaGF0LyIpLmNvbmNhdChjcmVhdGVySUQsICIvIikuY29uY2F0KF9jaGF0SUQpOwogICAgICAgICAgICAgICAgICBheGlvcy5nZXQoX3VybCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3JNc2cgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJyZXNwb25zZTogIiwgZXJyb3JNc2cpOwogICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgICAgICAgICAgfSk7IC8vIHNldCBpbiBkYiBzdGF0ZSB0byB0cnVlICsgaGVyZSAodGhpcy5yZXF1ZXN0QWNjZXB0ZWQpCiAgICAgICAgICAgICAgICAgIC8vIGNoYXRiYXIgYXBwZWFycwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8gU2VuZCBtZXNzYWdlcyBoYW5kbGVyCiAgICBzZW5kOiBmdW5jdGlvbiBzZW5kKGUpIHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgIHZhciBmb3JtYXR0ZWREYXRlID0gbW9tZW50KGRhdGUpLmZvcm1hdCgiREQtTU0tWVlZWSwgaGg6bW0gYSIpOwogICAgICB2YXIgY2hhdE9iamVjdCA9IHsKICAgICAgICByb29tSUQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5pZCwKICAgICAgICBzZW5kZXI6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuX2lkLAogICAgICAgIGNvbnRlbnQ6IHRoaXMubmV3TWVzc2FnZSwKICAgICAgICB0aW1lOiBmb3JtYXR0ZWREYXRlCiAgICAgIH07CiAgICAgIHRoaXMuc29ja2V0LmVtaXQoImNoYXQtbWVzc2FnZSIsIGNoYXRPYmplY3QpOwogICAgICB0aGlzLm5ld01lc3NhZ2UgPSBudWxsOyAvLyB0aGlzLiRyZWZzLm5ld01zZy5mb2N1cygpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["chatDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2HA,OAAA,KAAA,MAAA,OAAA;AACA,OAAA,EAAA,MAAA,kBAAA;AACA,OAAA,MAAA,MAAA,QAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,YADA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,eAAA,EAAA,KADA;AAEA,MAAA,WAAA,EAAA,KAFA;AAGA,MAAA,MAAA,EAAA,IAHA;AAIA,MAAA,eAAA,EAAA,EAJA;AAKA,MAAA,WAAA,EAAA,EALA;AAMA,MAAA,UAAA,EAAA,IANA;AAOA,MAAA,QAAA,EAAA;AAPA,KAAA;AASA,GAbA;AAeA,EAAA,OAfA,qBAeA;AACA,SAAA,MAAA,GAAA,EAAA,CAAA,uBAAA,CAAA;AACA,GAjBA;AAmBA,EAAA,OAnBA,qBAmBA;AAAA;;AACA,SAAA,MAAA,CAAA,IAAA,CAAA,UAAA,EAAA;AACA,MAAA,MAAA,EAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,GADA;AAEA,MAAA,MAAA,EAAA,KAAA,MAAA,CAAA,MAAA,CAAA;AAFA,KAAA;AAKA,SAAA,MAAA,CAAA,EAAA,CAAA,UAAA,EAAA,gBAAA;AAAA,UAAA,IAAA,QAAA,IAAA;AAAA,UAAA,WAAA,QAAA,WAAA;AACA;AACA,UAAA,eAAA,GAAA,WAAA;;AACA,MAAA,KAAA,CAAA,WAAA,CAAA,IAAA,CAAA,eAAA;;AAEA,UAAA,MAAA,GAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,GAAA,CALA,CAMA;;AACA,UAAA,YAAA,GAAA,IAAA,CAAA,OAAA,CAAA,QAAA;AACA,UAAA,cAAA,GAAA,IAAA,CAAA,OAAA,CAAA,OAAA,CARA,CAUA;;AACA,UAAA,cAAA,IAAA,MAAA,EAAA;AACA;AACA,QAAA,KAAA,CAAA,WAAA,GAAA,IAAA;AACA;;AAEA,UAAA,YAAA,IAAA,IAAA,EAAA;AACA,QAAA,KAAA,CAAA,eAAA,GAAA,IAAA;AACA,OAlBA,CAoBA;;;AACA,UAAA,QAAA,GAAA,IAAA,CAAA,QAAA;;AACA,MAAA,KAAA,CAAA,eAAA,CAAA,IAAA,CAAA,QAAA;AACA,KAvBA;AAyBA,SAAA,MAAA,CAAA,EAAA,CAAA,YAAA,EAAA,UAAA,aAAA,EAAA;AACA;AACA,MAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA,aAAA;AACA,KAHA;AAIA,GAtDA;AAwDA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,cAFA,0BAEA,SAFA,EAEA,OAFA,EAEA;AAAA;;AACA,UAAA,QAAA,aAAA,SAAA,cAAA,OAAA,CAAA,CADA,CAGA;;AACA,UAAA,GAAA,GAAA,IAAA,MAAA,CAAA,kBAAA,EAAA,IAAA,CAAA;AACA,UAAA,QAAA,GAAA,mBAAA,QAAA,CAAA,QAAA,CAAA,GAAA,CAAA,KAAA,EAAA;AACA,MAAA,QAAA,GAAA,CAAA,CAAA,oBAAA,QAAA,CAAA,KAAA,sEAAA,CAAA,MAAA,EAAA,KAAA,kBAAA,QAAA,CAAA,GAAA,kEAAA,CAAA,MAAA,EAAA,CAAA,EAAA,WAAA,EAAA;AACA,aAAA,QAAA;AACA,KAVA;AAYA;AACA,IAAA,iBAbA,6BAaA,MAbA,EAaA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AACA,oBAAA,MAAA,KAAA,QAAA,EAAA;AACA;AACA,kBAAA,MAFA,GAEA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAFA;AAGA,kBAAA,GAHA,aAGA,MAAA,CAAA,QAAA,CAAA,MAHA,6BAGA,MAHA;AAKA,kBAAA,KAAA,CACA,GADA,CACA,GADA,EAEA,IAFA,CAEA,UAAA,QAAA,EAAA;AACA,wBAAA,QAAA,GAAA,QAAA,CAAA,IAAA,CADA,CAEA;;AACA,oBAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,QAAA,EAHA,CAIA;;AACA,mBAPA,EAQA,KARA,CAQA,UAAA,GAAA,EAAA;AACA,oBAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,mBAVA,EALA,CAiBA;AACA,iBAlBA,MAkBA;AACA,kBAAA,MAAA,CAAA,eAAA,GAAA,IAAA;AAEA,kBAAA,SAHA,GAGA,MAAA,CAAA,WAAA,CAAA,CAAA,EAAA,EAHA;AAIA,kBAAA,OAJA,GAIA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAJA;AAKA,kBAAA,IALA,aAKA,MAAA,CAAA,QAAA,CAAA,MALA,6BAKA,SALA,cAKA,OALA;AAOA,kBAAA,KAAA,CACA,GADA,CACA,IADA,EAEA,IAFA,CAEA,UAAA,QAAA,EAAA;AACA,wBAAA,QAAA,GAAA,QAAA,CAAA,IAAA;AACA,oBAAA,OAAA,CAAA,GAAA,CAAA,YAAA,EAAA,QAAA;AACA,mBALA,EAMA,KANA,CAMA,UAAA,GAAA,EAAA;AACA,oBAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,mBARA,EAPA,CAiBA;AACA;AACA;;AAtCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAuCA,KApDA;AAsDA;AACA,IAAA,IAvDA,gBAuDA,CAvDA,EAuDA;AACA,MAAA,CAAA,CAAA,cAAA;AACA,UAAA,IAAA,GAAA,IAAA,IAAA,EAAA;AACA,UAAA,aAAA,GAAA,MAAA,CAAA,IAAA,CAAA,CAAA,MAAA,CAAA,qBAAA,CAAA;AAEA,UAAA,UAAA,GAAA;AACA,QAAA,MAAA,EAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EADA;AAEA,QAAA,MAAA,EAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,GAFA;AAGA,QAAA,OAAA,EAAA,KAAA,UAHA;AAIA,QAAA,IAAA,EAAA;AAJA,OAAA;AAOA,WAAA,MAAA,CAAA,IAAA,CAAA,cAAA,EAAA,UAAA;AACA,WAAA,UAAA,GAAA,IAAA,CAbA,CAcA;AACA;AAtEA;AAxDA,CAAA","sourcesContent":["<template>\n  <section class=\"chat-detail\">\n    <header>\n      <router-link to=\"/chats\" class=\"start\">\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"7.246\"\n          height=\"11.941\"\n          viewBox=\"0 0 7.246 11.941\"\n          style=\"display: block; transform: scale(-1, 1)\"\n        >\n          <path\n            id=\"Path_13\"\n            data-name=\"Path 13\"\n            d=\"M3.431-4.786a.656.656,0,0,0,0-.928l-5.314-5.314a.656.656,0,0,0-.928,0l-.62.62a.656.656,0,0,0,0,.927L.779-5.25-3.432-1.019a.656.656,0,0,0,0,.927l.62.62a.656.656,0,0,0,.928,0Z\"\n            transform=\"translate(3.623 11.22)\"\n            fill=\"#f07904\"\n          />\n        </svg>\n      </router-link>\n      <router-link :to=\"'/buddies/' + participant[0].id\">\n        <div :class=\"participant[0].profileAvatar\">\n          <p>\n            {{ createInitials(participant[0].firstName, participant[0].surName) }}\n          </p>\n        </div>\n\n        <h2>\n          {{ participant[0].firstName }}\n          {{ participant[0].surName }}\n        </h2>\n      </router-link>\n      <svg\n        id=\"Iconly_Bulk_More_Circle\"\n        data-name=\"Iconly/Bulk/More Circle\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"24\"\n        height=\"24\"\n        viewBox=\"0 0 24 24\"\n      >\n        <path\n          id=\"Fill_1\"\n          data-name=\"Fill 1\"\n          d=\"M20,10A10,10,0,1,1,10,0,10,10,0,0,1,20,10\"\n          transform=\"translate(2 2)\"\n          fill=\"#f07904\"\n          opacity=\"0.4\"\n        />\n        <path\n          id=\"Combined_Shape\"\n          data-name=\"Combined Shape\"\n          d=\"M8.959,1.2a1.2,1.2,0,1,1,1.2,1.2A1.2,1.2,0,0,1,8.959,1.2Zm-4.479,0a1.2,1.2,0,1,1,1.2,1.2A1.2,1.2,0,0,1,4.479,1.2ZM0,1.2a1.2,1.2,0,1,1,1.2,1.2A1.2,1.2,0,0,1,0,1.2Z\"\n          transform=\"translate(6.323 10.804)\"\n          fill=\"#f07904\"\n        />\n      </svg>\n    </header>\n\n    <main>\n      <ul>\n        <li v-for=\"(item, index) in messagesHistory[0]\" :key=\"index\">\n          <div v-if=\"item.sender !== $store.state.user._id\" class=\"other\">\n            <p>{{ item.content }}</p>\n          </div>\n\n          <div v-else class=\"me\">\n            <p>{{ item.content }}</p>\n          </div>\n        </li>\n\n        <div v-if=\"messages.length\">\n          <li v-for=\"(item, index) in messages\" :key=\"index\">\n            <div v-if=\"item.sender !== $store.state.user._id\" class=\"other\">\n              <p>{{ item.content }}</p>\n            </div>\n\n            <div v-else class=\"me\">\n              <p>{{ item.content }}</p>\n            </div>\n          </li>\n        </div>\n      </ul>\n\n      <div v-if=\"requestAccepted == false && viewCreater == false\">\n        <button @click=\"makeRequestChoice('reject')\">Afwijzen</button>\n        <button @click=\"makeRequestChoice('accept')\">Accepteren</button>\n      </div>\n\n      <form v-else @submit.prevent=\"send\">\n        <div>\n          <input type=\"text\" v-model=\"newMessage\" placeholder=\"Typ een chatbericht...\" required />\n          <svg\n            id=\"Voice\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"17\"\n            height=\"20\"\n            viewBox=\"0 0 17 20\"\n          >\n            <path\n              id=\"Fill_1\"\n              data-name=\"Fill 1\"\n              d=\"M16.031,0a.962.962,0,0,0-.969.957,6.563,6.563,0,0,1-13.125,0A.962.962,0,0,0,.969,0,.962.962,0,0,0,0,.957,8.443,8.443,0,0,0,7.532,9.293v1.925a.969.969,0,0,0,1.937,0V9.293A8.443,8.443,0,0,0,17,.957.962.962,0,0,0,16.031,0\"\n              transform=\"translate(0 7.826)\"\n              fill=\"#726d61\"\n              opacity=\"0.4\"\n            />\n            <path\n              id=\"Fill_4\"\n              data-name=\"Fill 4\"\n              d=\"M4.351,13.217H4.7a4.325,4.325,0,0,0,4.351-4.3V4.3A4.324,4.324,0,0,0,4.7,0H4.351A4.324,4.324,0,0,0,0,4.3V8.921a4.325,4.325,0,0,0,4.351,4.3\"\n              transform=\"translate(3.973 0)\"\n              fill=\"#726d61\"\n            />\n          </svg>\n        </div>\n\n        <button type=\"submit\">send</button>\n      </form>\n    </main>\n  </section>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport io from \"socket.io-client\";\nimport moment from \"moment\";\n\nexport default {\n  name: \"ChatDetail\",\n\n  data() {\n    return {\n      requestAccepted: false,\n      viewCreater: false,\n      socket: null,\n      messagesHistory: [],\n      participant: [],\n      newMessage: null,\n      messages: [],\n    };\n  },\n\n  created() {\n    this.socket = io(\"http://localhost:5000\");\n  },\n\n  mounted() {\n    this.socket.emit(\"joinRoom\", {\n      userID: this.$store.state.user._id,\n      roomID: this.$route.params.id,\n    });\n\n    this.socket.on(\"roomData\", ({ room, participant }) => {\n      // Store participant\n      let participantData = participant;\n      this.participant.push(participantData);\n\n      let userID = this.$store.state.user._id;\n      // Check if this is a chatRequest, then put request to true\n      let requestState = room.request.accepted;\n      let requestCreater = room.request.creater;\n\n      // check if chatCreatorID is the same as this user --> render chat\n      if (requestCreater == userID) {\n        // set view to viewCreater: false\n        this.viewCreater = true;\n      }\n\n      if (requestState == true) {\n        this.requestAccepted = true;\n      }\n\n      // Store messages history\n      let messages = room.messages;\n      this.messagesHistory.push(messages);\n    });\n\n    this.socket.on(\"newMessage\", (messageObject) => {\n      // console.log(\"New Message: \", messageObject);\n      this.messages.push(messageObject);\n    });\n  },\n\n  methods: {\n    // Get the initials of the name\n    createInitials(firstName, surName) {\n      let fullName = `${firstName} ${surName}`;\n\n      // Logic for getting the name initials\n      let rgx = new RegExp(/(\\p{L}{1})\\p{L}+/, \"gu\");\n      let initials = [...fullName.matchAll(rgx)] || [];\n      initials = ((initials.shift()?.[1] || \"\") + (initials.pop()?.[1] || \"\")).toUpperCase();\n      return initials;\n    },\n\n    // Chat request handler\n    async makeRequestChoice(choice) {\n      if (choice === \"reject\") {\n        // console.log(choice);\n        let chatID = this.$route.params.id;\n        let url = `${window.location.origin}/api/deleteChat/${chatID}`;\n\n        axios\n          .get(url)\n          .then((response) => {\n            let errorMsg = response.data;\n            // console.log(\"response: \", errorMsg);\n            this.$router.push(\"/chats\");\n            // succesfull afwijzing feedback msg\n          })\n          .catch((err) => {\n            console.log(err);\n          });\n\n        // delete chat and go back to /chats\n      } else {\n        this.requestAccepted = true;\n\n        let createrID = this.participant[0].id;\n        let chatID = this.$route.params.id;\n        let url = `${window.location.origin}/api/acceptChat/${createrID}/${chatID}`;\n\n        axios\n          .get(url)\n          .then((response) => {\n            let errorMsg = response.data;\n            console.log(\"response: \", errorMsg);\n          })\n          .catch((err) => {\n            console.log(err);\n          });\n\n        // set in db state to true + here (this.requestAccepted)\n        // chatbar appears\n      }\n    },\n\n    // Send messages handler\n    send(e) {\n      e.preventDefault();\n      let date = new Date();\n      let formattedDate = moment(date).format(\"DD-MM-YYYY, hh:mm a\");\n\n      let chatObject = {\n        roomID: this.$route.params.id,\n        sender: this.$store.state.user._id,\n        content: this.newMessage,\n        time: formattedDate,\n      };\n\n      this.socket.emit(\"chat-message\", chatObject);\n      this.newMessage = null;\n      // this.$refs.newMsg.focus();\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/components/chat/chatDetail.scss\";\n</style>\n"],"sourceRoot":"src/views/chat"}]}